<div class="header_banner dine_banner">
    <div class="main_container">
        <h4 class="header_banner_heading">District Dining</h4>
    </div>
</div>

<div class="main_container mobile_padding">
    <div class="visible_phone position_relative">
        <a class="mobile_header" href="/map">Center Map</a>
        <a class="mobile_header" href="#" id="cat_dd2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
            Select Category <i class="fa fa-chevron-down visible_phone pull-right"></i>
        </a>
        <ul id="category_container2" class="dropdown-menu" aria-labelledby="cat_dd2">
            <li href="#" class="show_all_stores">ALL</li>
             <li class="show_cat_stores" data-id="5642">AMERICAN</li>
            <li class="show_cat_stores" data-id="5646">ASIAN</li>
            <li class="show_cat_stores" data-id="5640">BAR</li>
             <li class="show_cat_stores" data-id="5638">BAR-B-QUE</li>
             <li class="show_cat_stores" data-id="5648">COFFEE/JUICE</li>
            <li class="show_cat_stores" data-id="5636">DESSERT/SPECIALTY</li>
            <li class="show_cat_stores" data-id="5645">GREEK</li>
            <li class="show_cat_stores" data-id="5651">GROCERY</li>
            <li class="show_cat_stores" data-id="5650">HALAL</li>
            <li class="show_cat_stores" data-id="5639">HAWAIIAN</li>
            <li class="show_cat_stores" data-id="5641">IRISH</li>
            <li class="show_cat_stores" data-id="5647">ITALIAN</li>
             <li class="show_cat_stores" data-id="5649">MEDITERRANEAN</li>
             <li class="show_cat_stores" data-id="5644">SEAFOOD</li>
             <li class="show_cat_stores" data-id="5643">TEA</li>
            <li class="show_cat_stores" data-id="5637">THAI</li>
            
            
        </ul>
    </div>
    <div class="store_nav hidden_phone">
        <div class="row">
            <div class="col-md-3">
                <a class="active_store_nav" href="/dine">DINE</a>
            </div>
            <div class="col-md-3">
                <a href="/map">CENTER MAP</a>
            </div>
            <div class="col-md-4">
                <span>Sort By: </span>
                <a href="#" class="show_all_stores">ALPHABETICAL</a>
            </div>
            <div class="col-md-2">
                <a href="#" id="cat_dd" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
                    CATEGORIES
                    <img src="//codecloud.cdn.speedyrails.net/sites/57f2b1016e6f645d03550000/image/png/1463153622000/chevron_down.png" class="category_icon" alt="">
                </a>
                <ul id="category_container" class="dropdown-menu" aria-labelledby="cat_dd">
                    <li href="#" class="show_all_stores">ALL</li>
             <li class="show_cat_stores" data-id="5642">AMERICAN</li>
            <li class="show_cat_stores" data-id="5646">ASIAN</li>
            <li class="show_cat_stores" data-id="5640">BAR</li>
             <li class="show_cat_stores" data-id="5638">BAR-B-QUE</li>
             <li class="show_cat_stores" data-id="5648">COFFEE/JUICE</li>
            <li class="show_cat_stores" data-id="5636">DESSERT/SPECIALTY</li>
            <li class="show_cat_stores" data-id="5645">GREEK</li>
            <li class="show_cat_stores" data-id="5651">GROCERY</li>
            <li class="show_cat_stores" data-id="5650">HALAL</li>
            <li class="show_cat_stores" data-id="5639">HAWAIIAN</li>
            <li class="show_cat_stores" data-id="5641">IRISH</li>
            <li class="show_cat_stores" data-id="5647">ITALIAN</li>
             <li class="show_cat_stores" data-id="5649">MEDITERRANEAN</li>
             <li class="show_cat_stores" data-id="5644">SEAFOOD</li>
             <li class="show_cat_stores" data-id="5643">TEA</li>
            <li class="show_cat_stores" data-id="5637">THAI</li>
                    
                </ul>
            </div>
        </div>
    </div>
    <div class="row content_container">
        <div class="col-md-12">
            <span class="store_initial hidden_now" id="cat_name"></span>
        </div>
        <div id="store_list_container" class="col-md-6">
            <script id="store_list_template" type="x-tmpl-mustache/text">
                <span style="{{show}}" class="store_initial open_stores" data-initial="{{data_initial}}">
                    {{initial}}
                    <i class="fa fa-chevron-down visible_phone pull-right"></i>
                </span>
                <div class="row cats_row open_{{data_initial}}" data-cat="{{cat_list}}">
                    <div class="col-md-12">
                        <p class="store_list_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                    </div>
                </div>
            </script>
        </div>
        <div id="store_list_container2" class="col-md-6">
            <script id="store_list_template2" type="x-tmpl-mustache/text">
                <span style="{{show}}" class="store_initial open_stores" data-initial="{{data_initial}}">
                    {{initial}}
                    <i class="fa fa-chevron-down visible_phone pull-right"></i>
                </span>
                <div class="row cats_row open_{{data_initial}}" data-cat="{{cat_list}}">
                    <div class="col-md-12">
                        <p class="store_list_name"><a href="/stores/{{slug}}">{{name}}</a></p>
                    </div>
                </div>
            </script>
        </div>
    </div>
</div>

<script id="category_template" type="x-tmpl-mustache/text">
    <li class="show_cat_stores" data-id="{{id}}">{{name}}</li>    
</script>

<script>
    $(document).ready(function(e){
        init(e);
        loadMallDataCached(renderPage);
        show_cat_stores();
    })
    
    function renderPage(){
        var stores = [];
        var s1 = getStoresListByCategoryID(5642)
        var s2 = getStoresListByCategoryID(5640)
        var s3 = getStoresListByCategoryID(5638)
        var s4 = getStoresListByCategoryID(5648)
        var s5 = getStoresListByCategoryID(5636)
        var s6 = getStoresListByCategoryID(5645)
        var s7 = getStoresListByCategoryID(5651)
        var s8 = getStoresListByCategoryID(5650)
        var s9 = getStoresListByCategoryID(5639)
        var s10 = getStoresListByCategoryID(5640)
        var s11 = getStoresListByCategoryID(5641)
        var s12 = getStoresListByCategoryID(5647)
        var s13 = getStoresListByCategoryID(5649)
        var s14 = getStoresListByCategoryID(5644)
        var s15 = getStoresListByCategoryID(5643)
        var s16 = getStoresListByCategoryID(5637)
   
        stores = stores.concat(s1)
        stores = stores.concat(s2)
        stores = stores.concat(s3)
        stores = stores.concat(s4)
        stores = stores.concat(s5)
        stores = stores.concat(s6)
        stores = stores.concat(s7)
        stores = stores.concat(s8)
        stores = stores.concat(s9)
        stores = stores.concat(s10)
        stores = stores.concat(s11)
        stores = stores.concat(s12)
        stores = stores.concat(s13)
        stores = stores.concat(s14)
        stores = stores.concat(s15)
        stores = stores.concat(s16)
    
        var newarr = [];
        var unique = {};
        $.each(stores, function(i,v){
            if (!unique[v.slug]) {
                newarr.push(v);
                unique[v.slug] = v;
            }
        })
        
        renderStoreList('#store_list_container','#store_list_template', newarr.sortBy(function(o){ return o.name }), "stores", "A", "J");
        renderStoreList('#store_list_container2','#store_list_template2', newarr.sortBy(function(o){ return o.name }), "stores","K", "Z" );
        // var categories = getStoreCategories();
        // renderGeneral('#category_container, #category_container2', '#category_template', categories);
        show_content();
        show_cat_stores();
    }
</script>